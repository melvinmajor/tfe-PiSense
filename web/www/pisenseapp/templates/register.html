{% extends "_base.html" %}

{% block content %}
<div id="headOrder">
  <h1>PiSense</h1>
  <p><em>Une solution IoT de prise de mesures</em>
    <br><small>Créé par Melvin Campos Casares pour <a href="https://dreamnetbe.net/" id="dreamnet">Dreamnet SRL</a>.</small></p>
</div>
<div class="main rowBoxWithAside">
  <section id="boxLeft" class="main">
    <h2>Connexion</h2>
    <hr>
    <form action="/login" method="post">
      <div class="form-group">
        <label for="connectInputEmail">Adresse e-mail</label>
        <input type="email" class="form-control" id="connectInputEmail" name="mail" value="{{request.form.mail}}" aria-describedby="emailHelp">
        <small id="emailHelp" class="form-text text-muted">Nous ne partagerons jamais votre e-mail avec quelqu'un d'autre.</small>
      </div>
      <div class="form-group">
        <label for="connectInputPassword">Mot de passe</label>
        <input type="password" class="form-control" id="connectInputPassword" name="password" value="{{request.form.password}}">
      </div>
      <button type="submit" class="btn btn-primary" id="shrink">Se connecter</button>
    </form>
    <br>
    <div class="form-group">
      <p id="error">{{ error }}</p>
    </div>
  </section>
  <section id="boxRight" class="main">
    <h2>Enregistrement</h2>
    <hr>
    <p id="registerHelp" class="text-muted"><small>Les éléments indiqués avec une astérisque * sont marqué <u>obligatoire</u></small></p>
    <form action="/register" method="post">
      <div class="form-group">
        <label for="registerFormEmail">Adresse e-mail *</label>
        <input type="email" class="form-control" id="registerFormEmail" placeholder="name@example.com" name="mail" required>
      </div>
      <div class="rowColumnForm">
        <div class="form-group twoColumnForm">
          <label for="registerFormPassword">Mot de passe *</label>
          <input type="password" class="form-control" id="registerFormPassword" name="password"
                 title="Le mot de passe doit contenir au moins 6 caractères, y compris majuscules/minuscules et chiffres"
                 pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}"
                 onchange="this.setCustomValidity(this.validity.patternMismatch ? this.title : '');
                   if(this.checkValidity()) form.password2.pattern = RegExp.escape(this.value);" required>
        </div>
        <div class="form-group twoColumnForm">
          <label for="registerConfirmFormPassword">Confirmation du mot de passe *</label>
          <input type="password" class="form-control" id="registerConfirmFormPassword" name="password2"
                 title="Veuillez entrez le même mot de passe" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}"
                 onchange=" this.setCustomValidity(this.validity.patternMismatch ? this.title : '');" required>
        </div>
      </div>
      <div class="rowColumnForm">
        <div class="form-group twoColumnForm">
          <label for="registerFormFirstname">Prénom *</label>
          <input type="text" class="form-control" id="registerFormFirstname" name="name" required>
        </div>
        <div class="form-group twoColumnForm">
          <label for="registerFormName">Nom *</label>
          <input type="text" class="form-control" id="registerFormName" name="firstname" required>
        </div>
      </div>
      <div class="form-group">
        <label for="registerFormPhone">Numéro de téléphone</label>
        <input type="tel" class="form-control" id="registerFormPhone" placeholder="+32123456789" pattern="[+32][0-9]{3}[0-9]{2}[0-9]{2}[0-9]{2}" name="phone">
        <small id="phoneHelp" class="form-text text-muted">Respectez bien le format : +32123456789</small>
      </div>
      <div class="rowColumnForm">
        <div class="form-group twoColumnForm">
          <label for="registerFormSensor">Disposez-vous de PiSense ?</label>
          <select class="form-control" id="registerFormDevice" name="device">
            <option value="false" default>Non</option>
            <option value="true">Oui</option>
          </select>
        </div>
        <div class="form-group twoColumnForm">
          <label for="registerFormSensorOutdoor">S'agit-il d'un appareil prévu pour l'extérieur ?</label>
          <select class="form-control" id="registerFormDeviceOutdoor" name="device_outdoor">
            <option value="false" default>Non</option>
            <option value="true">Oui</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="registerFormSensorID">Si vous disposez de PiSense, quel est le numéro d'identification ? *</label>
        <input type="text" class="form-control" id="registerFormDeviceID" name="device_id" required>
        <small id="deviceIDHelp" class="form-text text-muted">Si vous ne disposez pas encore de PiSense, veuillez entrer : 0</small>
      </div>
      <div class="form-group">
        <label for="registerFormSensors">Capteur ? *</label>
        <select class="form-control" id="registerFormSensors" name="sensors">
          <option value="none" default>Aucun</option>
          <option value="bmp280">BMP280</option>
          <option value="bme280">BME280</option>
          <option value="bme680">BME680</option>
          <option value="sds011">SDS011</option>
        </select>
      </div>
      <div class="rowColumnForm">
        <div class="twoColumnForm"><div class="g-recaptcha" data-theme="dark" data-sitekey="6LdT5uMUAAAAAAFjzkBuM76r3YByf9VWc9YjbPzk"></div></div>
        <div class="twoColumnForm"><button type="submit" class="btn btn-primary" id="shrink">S'enregistrer</button></div>
      </div>
    </form>
  </section>
</div>
{% endblock %}